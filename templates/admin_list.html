{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h4 class="mb-0">Elenco Agenti</h4>
  <a href="{{ url_for('admin_new_agent') }}" class="btn btn-sm btn-warning fw-bold">
    + Nuovo agente
  </a>
</div>

{% if agents %}
<table class="table table-dark table-striped align-middle mb-0">
  <thead>
    <tr>
      <th>#</th>
      <th>Nome</th>
      <th>Telefono</th>
      <th>Email</th>
      <th style="width: 170px;">Azioni</th>
    </tr>
  </thead>
  <tbody>
    {% for a in agents %}
    <tr>
      <td>{{ loop.index0 }}</td>
      <td>{{ a.name or a["name"] }}</td>
      <td>{{ a.phone or a["phone"] }}</td>
      <td>{{ a.email or a["email"] }}</td>
      <td>
        <div class="btn-group btn-group-sm">
          <a href="{{ url_for('admin_edit_agent', agent_id=loop.index0) }}"
             class="btn btn-outline-warning">Modifica</a>
          <a href="{{ url_for('public_card', agent_id=loop.index0) }}"
             class="btn btn-outline-light" target="_blank">Card</a>
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p class="text-center text-muted mb-0">
  Nessun agente inserito. Clicca su <strong>“Nuovo agente”</strong> per iniziare.
</p>
{% endif %}

{% endblock %}
