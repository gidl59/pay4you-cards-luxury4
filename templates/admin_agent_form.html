{% extends "base.html" %}

{% block content %}
<h4 class="mb-3">
  {% if agent %}Modifica agente{% else %}Nuovo agente{% endif %}
</h4>

<form method="post"
      enctype="multipart/form-data"
      action="{% if agent and agent_id is not none %}
                 {{ url_for('admin_edit_agent', agent_id=agent_id) }}
               {% else %}
                 {{ url_for('admin_new_agent') }}
               {% endif %}">

  {# hidden per sicurezza, ma non indispensabile #}
  <input type="hidden" name="agent_id"
         value="{% if agent_id is not none %}{{ agent_id }}{% endif %}">

  <div class="mb-3">
    <label class="form-label">Nome agente</label>
    <input type="text" name="name" class="form-control"
           value="{{ agent.name if agent else '' }}" required>
  </div>

  <div class="mb-3">
    <label class="form-label">Telefono</label>
    <input type="text" name="phone" class="form-control"
           value="{{ agent.phone if agent else '' }}">
  </div>

  <div class="mb-3">
    <label class="form-label">WhatsApp</label>
    <input type="text" name="whatsapp" class="form-control"
           value="{{ agent.whatsapp if agent else '' }}">
  </div>

  <div class="mb-3">
    <label class="form-label">Email</label>
    <input type="email" name="email" class="form-control"
           value="{{ agent.email if agent else '' }}">
  </div>

  <div class="mb-3">
    <label class="form-label">Galleria foto (URL separati da riga)</label>
    <textarea name="gallery" class="form-control" rows="3"
              placeholder="https://...">{% if agent and agent.gallery %}{{ agent.gallery }}{% endif %}</textarea>
  </div>

  <div class="mb-3">
    <label class="form-label">Foto profilo (PNG/JPG)</label>
    <input type="file" name="photo" class="form-control">
    {% if agent and agent.photo %}
      <small class="text-muted d-block mt-1">
        Attuale: <code>{{ agent.photo }}</code>
      </small>
    {% endif %}
  </div>

  <div class="d-flex justify-content-between">
    <a href="{{ url_for('admin_list') }}" class="btn btn-outline-light">
      Annulla
    </a>
    <button type="submit" class="btn btn-warning fw-bold">
      Salva agente
    </button>
  </div>
</form>
{% endblock %}

Inviato da iPhone
